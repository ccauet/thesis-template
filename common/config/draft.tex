%!TEX root = ../../main.tex

% To-do notes
\usepackage[colorinlistoftodos]{todonotes}
% Trying to get a link pointing back to the list of todos for every todo item
% \makeatletter
%   \renewcommand{\listoftodos}[1][\@todonotes@todolistname]{\@ifundefined{chapter}{\protect{\hypertarget{todonoteslist}{\section*{#1}}}}{\protect{\hypertarget{todonoteslist}{\chapter*{#1}}}} \@starttoc{tdo}}
% \makeatother
% \usepackage{letltxmacro}
% \LetLtxMacro{\temptodo}{\todo}
% \newcommand{\td}[2][]{\temptodo[#1]{#2 \hfill \hyperlink{todonoteslist}{$\uparrow$} }}

% predefined todonote commands
\newcommand{\important}[1]{\todo[color=red, bordercolor=lightgray]{\textbf{#1}}}
% just to inform
\newcommand{\info}[1]{\todo[color=lime!80, bordercolor=lightgray]{\textit{#1}}}
% mark missing reference
\newcommand{\addref}[1]{\todo[color=cyan, bordercolor=lightgray]{\textit{Add Ref:} #1}}
% highlight text and add note
\usepackage{soul}
\newcommand{\replace}[2]{\texthl{#1}\todo[color=yellow, bordercolor=lightgray]{\textit{Replace by:} #2}}

% add the following lines to your private config if desired:
% \presetkeys{todonotes}{disable}{}      to disable todonotes
% \presetkeys{todonotes}{inline}{}       to have 'inline' option as default


% Blindtext
\usepackage[pangram]{blindtext}

% Linenumbers
% add \linenumbers after \begin{document} to activate line numbering
\usepackage{lineno}

% fix to allow peaceful coexistence of line numbering and
% mathematical objects
% http://www.latex-community.org/forum/viewtopic.php?f=5&t=163
\newcommand*\patchAmsMathEnvironmentForLineno[1]{%
\expandafter\let\csname old#1\expandafter\endcsname\csname #1\endcsname
\expandafter\let\csname oldend#1\expandafter\endcsname\csname
end#1\endcsname
 \renewenvironment{#1}%
   {\linenomath\csname old#1\endcsname}%
   {\csname oldend#1\endcsname\endlinenomath}%
}
\newcommand*\patchBothAmsMathEnvironmentsForLineno[1]{%
  \patchAmsMathEnvironmentForLineno{#1}%
  \patchAmsMathEnvironmentForLineno{#1*}%
}
\AtBeginDocument{%
\patchBothAmsMathEnvironmentsForLineno{equation}%
\patchBothAmsMathEnvironmentsForLineno{align}%
\patchBothAmsMathEnvironmentsForLineno{flalign}%
\patchBothAmsMathEnvironmentsForLineno{alignat}%
\patchBothAmsMathEnvironmentsForLineno{gather}%
\patchBothAmsMathEnvironmentsForLineno{multline}%
}